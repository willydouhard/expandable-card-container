<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../expandable-card/expandable-card.html">

<!--
WARNING: This component is relying on the web animation api. The poly fill is in the component dependencies, so you just have to include it in your index.html file.
Example:
```html
<script src="bower_components/web-animations-js/web-animations-next-lite.min.js"></script>
```
`expandable-card-container` is a component that handles multiple `expandable-card`
Example:
```html
<expandable-card-container cards="[[cards]]"></expandable-card-container>
```
Where cards is an Array of Objects. Each object describes a `expandable-card`
A `expandable-card` (in the expanded state) will fit the size of the `expandable-card-container`.
If you want to set the geometry of the `expandable-card-container`, use `--container-mixin`.

### Styling
The following custom properties and mixins are available for styling:


| Custom property | Description | Default |
| ----------------|-------------|---------- |
| `--container-mixin` | Mixin applied to the container | `{}` |


@demo demo/index.html
-->

<dom-module id="expandable-card-container">

      <template>
      <style>
      :host {
            display: flex;
            width: 100vw;
            height: 100vh;
            flex-wrap: wrap;
            justify-content: space-around;
            align-items: center;
            position: relative !important;
            @apply(--container-mixin);
      }
      #placeholder {
            display: none;
      }
      </style>
                  <expandable-card id="placeholder"></expandable-card>
                  <template is="dom-repeat" items="{{cards}}" as="card">
                       <expandable-card
                         retracted-title="[[card.retractedTitle]]"
                         retracted-content="[[card.retractedContent]]"
                         expanded-title="[[card.expandedTitle]]"
                         expanded-content="[[card.expandedContent]]">
                   </expandable-card>
                  </template>
            </template>

<script>
Polymer({
      is: 'expandable-card-container',
      properties: {
            cards: {
                  type: Array
            }
      },
      listeners: {
            "expanding": "_onExpand",
            "retracting": "_onRetract"
      },
      _onExpand: function($event){

            var allCards = Array.from(this.querySelectorAll('expandable-card'));
            var previousSibling = allCards[allCards.indexOf($event.detail.el) - 1];

            this.$.placeholder.retractedTitle = previousSibling.retractedTitle;
            this.$.placeholder.retractedContent = previousSibling.retractedContent;

            this.$.placeholder.style.display = 'block';
      },
      _onRetract: function(){
            this.$.placeholder.style.display = 'none';
      }
});
</script>
</dom-module>
